# Log rotation for PostgreSQL database
/var/log/opsfinder/database/*.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 0640 postgres postgres
    dateext
    dateformat -%Y%m%d
    maxsize 100M
    sharedscripts
    postrotate
        # Signal PostgreSQL to reopen log files
        docker exec opsfinder-db pg_ctl reload -D /var/lib/postgresql/data 2>/dev/null || true
    endscript
}
